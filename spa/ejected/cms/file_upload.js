import{SvelteComponent,add_flush_callback,append,attr,bind,binding_callbacks,bubble,check_outros,children,claim_component,claim_element,claim_space,claim_text,create_component,destroy_component,detach,element,empty,group_outros,init,insert,listen,mount_component,noop,prevent_default,run_all,safe_not_equal,space,svg_element,text,transition_in,transition_out}from"../../web_modules/svelte/internal/index.mjs";import MediaFilters from"./media_filters.js";import MediaGrid from"./media_grid.js";import ButtonWrapper from"./button_wrapper.js";import Button from"./button.js";function create_else_block_1(e){let s,n,d,t,a,f,m,o,_,l,j,p,b,u,v,g,c,i,r,y,h,w,O;return{c(){s=element("div"),n=element("div"),d=element("div"),t=svg_element("svg"),a=svg_element("path"),f=svg_element("path"),m=svg_element("polyline"),o=svg_element("line"),_=space(),l=element("div"),j=text("Drag a file here to upload"),b=space(),u=element("div"),v=text("Or"),g=space(),c=element("div"),i=element("label"),r=element("input"),y=space(),h=element("span"),this.h()},l(e){s=claim_element(e,"DIV",{class:!0});var w,O,x,C,E,k,A,p=children(s);n=claim_element(p,"DIV",{class:!0}),O=children(n),d=claim_element(O,"DIV",{class:!0}),C=children(d),t=claim_element(C,"svg",{xmlns:!0,class:!0,width:!0,height:!0,viewBox:!0,"stroke-width":!0,stroke:!0,fill:!0,"stroke-linecap":!0,"stroke-linejoin":!0},1),w=children(t),a=claim_element(w,"path",{stroke:!0,d:!0,fill:!0},1),children(a).forEach(detach),f=claim_element(w,"path",{d:!0},1),children(f).forEach(detach),m=claim_element(w,"polyline",{points:!0},1),children(m).forEach(detach),o=claim_element(w,"line",{x1:!0,y1:!0,x2:!0,y2:!0},1),children(o).forEach(detach),w.forEach(detach),C.forEach(detach),_=claim_space(O),l=claim_element(O,"DIV",{class:!0}),E=children(l),j=claim_text(E,"Drag a file here to upload"),E.forEach(detach),O.forEach(detach),b=claim_space(p),u=claim_element(p,"DIV",{class:!0}),k=children(u),v=claim_text(k,"Or"),k.forEach(detach),g=claim_space(p),c=claim_element(p,"DIV",{class:!0}),A=children(c),i=claim_element(A,"LABEL",{class:!0}),x=children(i),r=claim_element(x,"INPUT",{type:!0,"aria-label":!0,class:!0}),y=claim_space(x),h=claim_element(x,"SPAN",{class:!0}),children(h).forEach(detach),x.forEach(detach),A.forEach(detach),p.forEach(detach),this.h()},h(){attr(a,"stroke","none"),attr(a,"d","M0 0h24v24H0z"),attr(a,"fill","none"),attr(f,"d","M7 18a4.6 4.4 0 0 1 0 -9a5 4.5 0 0 1 11 2h1a3.5 3.5 0 0 1 0 7h-1"),attr(m,"points","9 15 12 12 15 15"),attr(o,"x1","12"),attr(o,"y1","12"),attr(o,"x2","12"),attr(o,"y2","21"),attr(t,"xmlns","http://www.w3.org/2000/svg"),attr(t,"class","icon icon-tabler icon-tabler-cloud-upload"),attr(t,"width","44"),attr(t,"height","44"),attr(t,"viewBox","0 0 24 24"),attr(t,"stroke-width","1.5"),attr(t,"stroke","#2c3e50"),attr(t,"fill","none"),attr(t,"stroke-linecap","round"),attr(t,"stroke-linejoin","round"),attr(d,"class","drop-icon"),attr(l,"class","drop-text"),attr(n,"class",p="drop"+(e[4]?" active":"")+" svelte-6x59kg"),attr(u,"class","or svelte-6x59kg"),attr(r,"type","file"),r.multiple="multiple",attr(r,"aria-label","File browser"),attr(r,"class","svelte-6x59kg"),attr(h,"class","file-custom svelte-6x59kg"),attr(i,"class","file svelte-6x59kg"),attr(c,"class","choose"),attr(s,"class","upload-widgets svelte-6x59kg")},m(p,x){insert(p,s,x),append(s,n),append(n,d),append(d,t),append(t,a),append(t,f),append(t,m),append(t,o),append(n,_),append(n,l),append(l,j),append(s,b),append(s,u),append(u,v),append(s,g),append(s,c),append(c,i),append(i,r),append(i,y),append(i,h),w||(O=[listen(n,"dragenter",e[7]),listen(n,"dragleave",e[7]),listen(n,"drop",prevent_default(e[20])),listen(n,"dragover",prevent_default(e[12])),listen(c,"change",e[21])],w=!0)},p(e,t){t&16&&p!==(p="drop"+(e[4]?" active":"")+" svelte-6x59kg")&&attr(n,"class",p)},i:noop,o:noop,d(e){e&&detach(s),w=!1,run_all(O)}}}function create_if_block(e){let t,l,r,o,n,c,i,s,a;function h(t){e[13](t)}function m(t){e[14](t)}let d={singleSelect:!0};e[0]!==void 0&&(d.assets=e[0]),e[1]!==void 0&&(d.enabledFilters=e[1]),t=new MediaFilters({props:d}),binding_callbacks.push(()=>bind(t,"assets",h)),binding_callbacks.push(()=>bind(t,"enabledFilters",m));function f(t){e[15](t)}let u={files:e[10](e[2])};return e[5]!==void 0&&(u.selectedMedia=e[5]),n=new MediaGrid({props:u}),binding_callbacks.push(()=>bind(n,"selectedMedia",f)),s=new ButtonWrapper({props:{$$slots:{default:[create_default_slot]},$$scope:{ctx:e}}}),{c(){create_component(t.$$.fragment),o=space(),create_component(n.$$.fragment),i=space(),create_component(s.$$.fragment)},l(e){claim_component(t.$$.fragment,e),o=claim_space(e),claim_component(n.$$.fragment,e),i=claim_space(e),claim_component(s.$$.fragment,e)},m(e,r){mount_component(t,e,r),insert(e,o,r),mount_component(n,e,r),insert(e,i,r),mount_component(s,e,r),a=!0},p(e,o){const i={};!l&&o&1&&(l=!0,i.assets=e[0],add_flush_callback(()=>l=!1)),!r&&o&2&&(r=!0,i.enabledFilters=e[1],add_flush_callback(()=>r=!1)),t.$set(i);const a={};o&4&&(a.files=e[10](e[2])),!c&&o&32&&(c=!0,a.selectedMedia=e[5],add_flush_callback(()=>c=!1)),n.$set(a);const d={};o&8388654&&(d.$$scope={dirty:o,ctx:e}),s.$set(d)},i(e){if(a)return;transition_in(t.$$.fragment,e),transition_in(n.$$.fragment,e),transition_in(s.$$.fragment,e),a=!0},o(e){transition_out(t.$$.fragment,e),transition_out(n.$$.fragment,e),transition_out(s.$$.fragment,e),a=!1},d(e){destroy_component(t,e),e&&detach(o),destroy_component(n,e),e&&detach(i),destroy_component(s,e)}}}function create_else_block(e){let t,n,s,o;return{c(){t=element("button"),n=text("Discard all")},l(e){t=claim_element(e,"BUTTON",{});var s=children(t);n=claim_text(s,"Discard all"),s.forEach(detach)},m(i,a){insert(i,t,a),append(t,n),s||(o=listen(t,"click",prevent_default(e[19])),s=!0)},p:noop,d(e){e&&detach(t),s=!1,o()}}}function create_if_block_1(e){let t,n,s,o;return{c(){t=element("button"),n=text("Discard selected")},l(e){t=claim_element(e,"BUTTON",{});var s=children(t);n=claim_text(s,"Discard selected"),s.forEach(detach)},m(i,a){insert(i,t,a),append(t,n),s||(o=listen(t,"click",prevent_default(e[9])),s=!0)},p:noop,d(e){e&&detach(t),s=!1,o()}}}function create_default_slot(e){let n,s,c,i,o,a,l,d;function m(t){e[16](t)}let u={buttonText:"Save Media",action:"create",encoding:"base64"};e[2]!==void 0&&(u.commitList=e[2]),s=new Button({props:u}),binding_callbacks.push(()=>bind(s,"commitList",m));function h(e){return e[5].length>0?create_if_block_1:create_else_block}let r=h(e,-1),t=r(e);return{c(){n=element("div"),create_component(s.$$.fragment),i=space(),t.c(),o=empty(),this.h()},l(e){n=claim_element(e,"DIV",{class:!0});var a=children(n);claim_component(s.$$.fragment,a),a.forEach(detach),i=claim_space(e),t.l(e),o=empty(),this.h()},h(){attr(n,"class","button-primary")},m(r,c){insert(r,n,c),mount_component(s,n,null),insert(r,i,c),t.m(r,c),insert(r,o,c),a=!0,l||(d=[listen(n,"click",e[11]),listen(n,"click",prevent_default(e[17])),listen(n,"click",prevent_default(e[18]))],l=!0)},p(e,n){const i={};!c&&n&4&&(c=!0,i.commitList=e[2],add_flush_callback(()=>c=!1)),s.$set(i),r===(r=h(e,n))&&t?t.p(e,n):(t.d(1),t=r(e),t&&(t.c(),t.m(o.parentNode,o)))},i(e){if(a)return;transition_in(s.$$.fragment,e),a=!0},o(e){transition_out(s.$$.fragment,e),a=!1},d(e){e&&detach(n),destroy_component(s),e&&detach(i),t.d(e),e&&detach(o),l=!1,run_all(d)}}}function create_fragment(e){let s,t,n,i;const a=[create_if_block,create_else_block_1],o=[];function r(e){return e[2].length>0?0:1}return t=r(e,-1),n=o[t]=a[t](e),{c(){s=element("div"),n.c(),this.h()},l(e){s=claim_element(e,"DIV",{class:!0});var t=children(s);n.l(t),t.forEach(detach),this.h()},h(){attr(s,"class","upload-wrapper svelte-6x59kg")},m(e,n){insert(e,s,n),o[t].m(s,null),i=!0},p(e,[i]){let c=t;t=r(e,i),t===c?o[t].p(e,i):(group_outros(),transition_out(o[c],1,1,()=>{o[c]=null}),check_outros(),n=o[t],n?n.p(e,i):(n=o[t]=a[t](e),n.c()),transition_in(n,1),n.m(s,null))},i(){if(i)return;transition_in(n),i=!0},o(){transition_out(n),i=!1},d(e){e&&detach(s),o[t].d()}}}function instance(e,t,n){let{assets:i}=t,o=[],s=[];const l=e=>{let t=new FileReader;t.readAsDataURL(e),t.onload=t=>{n(2,s=[...s,{file:"assets/"+e.name,contents:t.target.result}])}},d=e=>{Array.from(e).forEach(e=>{l(e)})};let r="assets/",c;const f=()=>{n(4,c=!c)},u=e=>{if(e.dataTransfer.items)for(let t=0;t<e.dataTransfer.items.length;t++)if(e.dataTransfer.items[t].kind==="file"){let n=e.dataTransfer.items[t].getAsFile();l(n)}};let a=[];const m=()=>{a.forEach(e=>{n(2,s=s.filter(t=>t.contents!==e)),n(5,a=[])})},h=e=>e.map(e=>e.contents),p=()=>{s.forEach(e=>{n(0,i=[...i,e.contents])})};function g(t){bubble.call(this,e,t)}function v(e){i=e,n(0,i)}function b(e){o=e,n(1,o)}function j(e){a=e,n(5,a)}function y(e){s=e,n(2,s)}const _=()=>n(1,o=[]),w=()=>n(3,r="assets/"),O=()=>n(2,s=[]),x=e=>u(e),C=e=>d(e.target.files);return e.$$set=e=>{"assets"in e&&n(0,i=e.assets)},e.$$.update=()=>{if(e.$$.dirty&14)$:if(o){if(o.length>0){let t=o[0].join("/")+"/";let e="assets/"+t;s.forEach(t=>{t.file=t.file.replace(r,e)});n(3,r=e)}}},[i,o,s,r,c,a,d,f,u,m,h,p,g,v,b,j,y,_,w,O,x,C]}class Component extends SvelteComponent{constructor(e){super(),init(this,e,instance,create_fragment,safe_not_equal,{assets:0})}}export default Component