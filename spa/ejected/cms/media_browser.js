import{SvelteComponent,add_flush_callback,append,attr,bind,binding_callbacks,check_outros,children,claim_component,claim_element,claim_space,claim_text,create_component,destroy_component,detach,element,empty,group_outros,init,insert,listen,mount_component,run_all,safe_not_equal,space,text,transition_in,transition_out}from"../../web_modules/svelte/internal/index.mjs";import MediaFilters from"./media_filters.js";import MediaGrid from"./media_grid.js";import ButtonWrapper from"./button_wrapper.js";import Button from"./button.js";function create_if_block(e){let t,n;return t=new ButtonWrapper({props:{$$slots:{default:[create_default_slot]},$$scope:{ctx:e}}}),{c(){create_component(t.$$.fragment)},l(e){claim_component(t.$$.fragment,e)},m(e,s){mount_component(t,e,s),n=!0},p(e,n){const s={};n&262272&&(s.$$scope={dirty:n,ctx:e}),t.$set(s)},i(e){if(n)return;transition_in(t.$$.fragment,e),n=!0},o(e){transition_out(t.$$.fragment,e),n=!1},d(e){destroy_component(t,e)}}}function create_default_slot(e){let s,a,o,n,t,r,i,c,l;function u(t){e[17](t)}let d={buttonText:"Delete Selected Media",action:"delete",encoding:"text"};return e[7]!==void 0&&(d.commitList=e[7]),t=new Button({props:d}),binding_callbacks.push(()=>bind(t,"commitList",u)),{c(){s=element("button"),a=text("Download selected"),o=space(),n=element("div"),create_component(t.$$.fragment),this.h()},l(e){s=claim_element(e,"BUTTON",{});var i,r=children(s);a=claim_text(r,"Download selected"),r.forEach(detach),o=claim_space(e),n=claim_element(e,"DIV",{class:!0}),i=children(n),claim_component(t.$$.fragment,i),i.forEach(detach),this.h()},h(){attr(n,"class","delete-wrapper button-secondary")},m(r,d){insert(r,s,d),append(s,a),insert(r,o,d),insert(r,n,d),mount_component(t,n,null),i=!0,c||(l=[listen(s,"click",e[8]),listen(n,"click",e[9])],c=!0)},p(e,n){const s={};!r&&n&128&&(r=!0,s.commitList=e[7],add_flush_callback(()=>r=!1)),t.$set(s)},i(e){if(i)return;transition_in(t.$$.fragment,e),i=!0},o(e){transition_out(t.$$.fragment,e),i=!1},d(e){e&&detach(s),e&&detach(o),e&&detach(n),destroy_component(t),c=!1,run_all(l)}}}function create_fragment(e){let o,n,m,f,v,h,d,s,p,g,u,r,i,c;function x(t){e[10](t)}function O(t){e[11](t)}function j(t){e[12](t)}function b(t){e[13](t)}let a={};e[0]!==void 0&&(a.assets=e[0]),e[4]!==void 0&&(a.filters=e[4]),e[5]!==void 0&&(a.enabledFilters=e[5]),e[6]!==void 0&&(a.filteredAssets=e[6]),n=new MediaFilters({props:a}),binding_callbacks.push(()=>bind(n,"assets",x)),binding_callbacks.push(()=>bind(n,"filters",O)),binding_callbacks.push(()=>bind(n,"enabledFilters",j)),binding_callbacks.push(()=>bind(n,"filteredAssets",b));function y(t){e[14](t)}function _(t){e[15](t)}function w(t){e[16](t)}let l={files:e[6]};e[3]!==void 0&&(l.selectedMedia=e[3]),e[1]!==void 0&&(l.changingAsset=e[1]),e[2]!==void 0&&(l.showMedia=e[2]),s=new MediaGrid({props:l}),binding_callbacks.push(()=>bind(s,"selectedMedia",y)),binding_callbacks.push(()=>bind(s,"changingAsset",_)),binding_callbacks.push(()=>bind(s,"showMedia",w));let t=e[3].length>0&&create_if_block(e);return{c(){o=element("div"),create_component(n.$$.fragment),d=space(),create_component(s.$$.fragment),r=space(),t&&t.c(),i=empty(),this.h()},l(e){o=claim_element(e,"DIV",{class:!0});var a=children(o);claim_component(n.$$.fragment,a),d=claim_space(a),claim_component(s.$$.fragment,a),a.forEach(detach),r=claim_space(e),t&&t.l(e),i=empty(),this.h()},h(){attr(o,"class","media-wrapper svelte-1tdkqce")},m(e,a){insert(e,o,a),mount_component(n,o,null),append(o,d),mount_component(s,o,null),insert(e,r,a),t&&t.m(e,a),insert(e,i,a),c=!0},p(e,[o]){const a={};!m&&o&1&&(m=!0,a.assets=e[0],add_flush_callback(()=>m=!1)),!f&&o&16&&(f=!0,a.filters=e[4],add_flush_callback(()=>f=!1)),!v&&o&32&&(v=!0,a.enabledFilters=e[5],add_flush_callback(()=>v=!1)),!h&&o&64&&(h=!0,a.filteredAssets=e[6],add_flush_callback(()=>h=!1)),n.$set(a);const r={};o&64&&(r.files=e[6]),!p&&o&8&&(p=!0,r.selectedMedia=e[3],add_flush_callback(()=>p=!1)),!g&&o&2&&(g=!0,r.changingAsset=e[1],add_flush_callback(()=>g=!1)),!u&&o&4&&(u=!0,r.showMedia=e[2],add_flush_callback(()=>u=!1)),s.$set(r),e[3].length>0?t?(t.p(e,o),o&8&&transition_in(t,1)):(t=create_if_block(e),t.c(),transition_in(t,1),t.m(i.parentNode,i)):t&&(group_outros(),transition_out(t,1,1,()=>{t=null}),check_outros())},i(e){if(c)return;transition_in(n.$$.fragment,e),transition_in(s.$$.fragment,e),transition_in(t),c=!0},o(e){transition_out(n.$$.fragment,e),transition_out(s.$$.fragment,e),transition_out(t),c=!1},d(e){e&&detach(o),destroy_component(n),destroy_component(s),e&&detach(r),t&&t.d(e),e&&detach(i)}}}function instance(e,t,n){let i,c,{assets:o}=t,{changingAsset:a}=t,{showMedia:r}=t,l=[],d=[],s=[];const h=()=>{s.forEach(e=>{const t=document.createElement("a");t.setAttribute("href",e),t.setAttribute("download",e.substring(e.lastIndexOf("/")+1)),t.click()})},u=()=>{s.forEach(e=>{n(0,o=o.filter(t=>t!=e))}),n(3,s=[])};function m(e){o=e,n(0,o)}function f(e){l=e,n(4,l)}function p(e){d=e,n(5,d)}function g(e){i=e,n(6,i)}function v(e){s=e,n(3,s)}function b(e){a=e,n(1,a)}function j(e){r=e,n(2,r)}function y(e){c=e,(n(7,c),n(3,s))}e.$$set=e=>{"assets"in e&&n(0,o=e.assets),"changingAsset"in e&&n(1,a=e.changingAsset),"showMedia"in e&&n(2,r=e.showMedia)},e.$$.update=()=>{if(e.$$.dirty&8)$:n(7,c=s.map(e=>({file:e,contents:null})))};$:n(6,i=[]);return[o,a,r,s,l,d,i,c,h,u,m,f,p,g,v,b,j,y]}class Component extends SvelteComponent{constructor(e){super(),init(this,e,instance,create_fragment,safe_not_equal,{assets:0,changingAsset:1,showMedia:2})}}export default Component